# US-006.4 대시보드 채팅 백그라운드 재시도 시나리오

## 시나리오
- 사용자가 대시보드에서 질문을 전송한다.
- 로딩 상태를 유지한 채 다른 페이지로 이동한다.
- 클라이언트 연결이 끊겨 백엔드 검색 작업이 중단되더라도, 대시보드로 돌아오면 동일 질문으로 자동 재시도한다.
- 백엔드 응답을 수신하면 로딩이 종료되고, 누락됐던 질문 메시지까지 포함해 타임라인에 즉시 답변이 표시된다.

## 기대 결과
- 질문 전송 후 화면을 떠났다 돌아와도 로딩이 유지되며, 완료된 답변이 자동 표시된다.
- 이전에 보냈던 질문 텍스트가 로딩 중에도 항상 채팅 영역에 표시된다.

## 구현 노트
- 저장된 채팅 상태에 `pendingQuery`가 남아 있고 진행 중인 컨트롤러가 없을 때 동일 쿼리로 `/api/aiagent/search`를 재호출한다.
- 저장된 메시지에 사용자가 입력한 질문이 없으면 자동으로 삽입해 로딩 힌트와 함께 표시한다.
- 검색 요청 처리/에러 핸들링을 공통 함수로 분리해 전송 및 재시도 경로가 동일하게 동작하도록 했다.
