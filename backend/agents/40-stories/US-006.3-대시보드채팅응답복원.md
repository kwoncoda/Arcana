# US-006.3 대시보드 채팅 응답 복원 시나리오

## 배경
- 대시보드에서 질문을 던진 뒤 다른 페이지로 이동하면 로딩은 유지되지만, 백엔드가 보낸 최종 답변이 화면에 표시되지 않는 문제가 보고되었다.
- 새로고침 후 과거 질문이 다시 글자 단위로 스트리밍되어 재실행되는 것처럼 보이는 UX 결함이 있었다.

## 시나리오
1. 사용자가 대시보드에서 질문을 보낸다.
2. 사용자가 다른 페이지로 이동하거나 새로고침한다.
3. 백엔드가 질문에 대한 답변을 완료하여 `/api/aiagent/search` 응답이 도착한다.
4. 로컬 스토리지에 저장된 채팅 상태가 즉시 갱신되어 로딩이 해제되고, 전체 답변이 저장된다.
5. 사용자가 다시 대시보드로 돌아오면 이전 질문과 함께 완성된 답변이 즉시 표시되고, 더 이상 글자 단위 스트리밍이 재생되지 않는다.

## 구현 메모
- 채팅 상태 저장 시 AI 메시지에 대해 스트리밍 플래그를 제거하여 재렌더링 시 완성된 텍스트를 그대로 출력.
- 응답 파싱을 `answer` → `response.answer` → `data.answer` 순으로 안전하게 처리해 누락 시에도 로딩이 멈추도록 함.
- 상태 정상화를 거쳐 탭 이동/새로고침 이후에도 동일한 메시지와 로딩 상태를 복원.
