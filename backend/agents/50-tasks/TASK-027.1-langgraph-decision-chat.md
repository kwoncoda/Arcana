---
id: TASK-0027.1
type: task
title: LangGraph 의사결정 대화/검색/생성 분기 고도화
status: done
owner: backend
updated: 2025-10-20
---

## 요청 사항
- LangGraph 의사결정에서 일반 대화, 검색, 파일 생성(생성 방식 포함)을 구분해 흐름을 분기한다.
- 검색 실패 시 "관련 문서를 찾을 수 없습니다. 지식 베이스를 갱신해주세요" 문구로 안내한다.
- 파일 생성 흐름은 RAG 사용 여부를 판단해 생성하고, 최종 응답에서 생성 근거를 요약해준다.
- 단순 대화 요청은 검색/생성 없이 바로 응답하도록 한다.

## 진행 기록
- 2025-10-20: 요구사항 확인 및 기존 LangGraph 결정/최종 응답 프롬프트 분석.
- 2025-10-20: chat 분기, 최종 응답 지침, 검색 실패 안내 문구 추가 및 생성 결과 설명을 강화함.

## 결과
- DecisionAgent가 검색/생성/대화 요청을 구분하고 생성 시 RAG 필요 여부를 판단하도록 프롬프트를 확장했습니다.
- LangGraph에 chat 노드를 추가해 단순 대화는 검색·생성 없이 바로 응답하고, 검색 실패 시 지식 베이스 갱신 안내를 반환합니다.
- 생성 흐름에서는 참고한 문서 수를 포함한 응답을 만들고, 최종 답변 편집기에 모드별 표현 지침을 추가했습니다.
