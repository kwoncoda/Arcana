---
id: TASK-0015.1
type: task
title: 노션 텍스트를 마크다운 구조로 변환
status: done
owner: backend
updated: 2025-10-20
---

## 요청 사항
- 노션에서 수집한 블록 정보를 단순 문자열이 아니라 마크다운 구조를 반영하도록 변환합니다.
- 리스트, 제목, 인용, 체크박스 등 주요 블록 타입을 마크다운 문법으로 표현합니다.
- 코드를 포함한 블록은 들여쓰기와 줄바꿈이 유지되도록 처리합니다.

## 진행 기록
- 2025-10-20: /backend/agents 문서를 모두 검토하고 기존 노션 수집/청킹 로직을 분석함.
- 2025-10-20: 변환 유틸리티에 마크다운 포맷터를 도입하기 위한 변경 범위(backend/notions/notionPull.py, backend/notions/ragTransform.py)를 파악함.
- 2025-10-20: 마크다운 변환 로직 구현 및 리스트/제목/코드 블록 포맷을 반영하여 테스트 실행을 시도함.

## 결과
- 노션 리치 텍스트 주석을 해석해 굵게/기울임/링크/코드 등을 마크다운으로 직렬화합니다.
- 리스트, 체크박스, 인용, 구분선, 코드 블록 등의 블록 타입을 마크다운에 맞게 변환합니다.
- 청킹 시 리스트 하위 항목이 들여쓰기 되도록 재귀 수집 로직을 조정했습니다.
- `uv run pytest` 실행 시 네트워크 제한으로 `protobuf` 다운로드가 실패하여 테스트를 완료하지 못했습니다.

