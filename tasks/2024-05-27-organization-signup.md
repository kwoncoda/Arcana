# 회원가입 분기 작업 정리

## 목표
- `/users/register` API가 `type` 파라미터에 따라 개인/조직 가입 로직을 분기하도록 개선
- 조직 가입 시 `organizations`, `memberships`, `workspaces` 테이블 간 참조 무결성을 보장
- 개인 가입 시 기본 워크스페이스를 자동으로 생성하고 `personal` 타입으로 저장

## 진행 내용
1. `RegisterRequest`가 전달한 `type` 값을 `WorkspaceType` 열거형으로 변환해 분기 처리를 명확히 했습니다.
2. 조직 가입일 경우 조직과 멤버십을 먼저 생성하고, 이후 조직 타입 워크스페이스를 생성하도록 순서를 조정했습니다.
3. 개인 가입일 경우 사용자 식별 정보를 이용해 기본 워크스페이스 이름을 결정하고, `owner_user_idx`를 사용자에게 연결했습니다.
4. 예외 발생 시 트랜잭션을 롤백하여 중복 데이터가 남지 않도록 했습니다.

## 비고
- MVP 단계 요구사항에 따라 조직 멤버십 기본 역할은 `member`로 설정했습니다.
- 추가적인 유효성 검증이나 권한 처리는 추후 요구사항에 맞춰 확장 가능합니다.
